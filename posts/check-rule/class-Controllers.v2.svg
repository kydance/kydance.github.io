<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="560px" preserveAspectRatio="none" style="width:625px;height:560px;" version="1.1" viewBox="0 0 625 560" width="625px" zoomAndPan="magnify"><defs><filter height="300%" id="faquket7h49u6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f4e70ef68289585296b9045165e58692]
cluster controllers--><polygon fill="#FFFFFF" filter="url(#faquket7h49u6)" points="16,129,108,129,115,151.2969,608,151.2969,608,553.68,16,553.68,16,129" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="115" y1="151.2969" y2="151.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="86" x="20" y="143.9951">controllers</text><!--MD5=[1319138cb28f0f36a5dfa0be196e7b9a]
cluster djframework--><polygon fill="#FFFFFF" filter="url(#faquket7h49u6)" points="249,6,355,6,362,28.2969,375,28.2969,375,105,249,105,249,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="249" x2="362" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="253" y="20.9951">djframework</text><!--MD5=[61f544a13008ace1a3099ca5d788249a]
class controllers.BaseController--><rect codeLine="2" fill="#FEFECE" filter="url(#faquket7h49u6)" height="60.8047" id="controllers.BaseController" style="stroke:#A80036;stroke-width:1.5;" width="148" x="238" y="170.4"/><ellipse cx="263.8" cy="186.4" fill="#7FFFD4" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M263.2844,186.9625 Q261.425,186.2594 260.7688,185.4937 Q260.1281,184.7125 260.1281,183.4 Q260.1281,181.7125 261.2063,180.7437 Q262.2844,179.775 264.1594,179.775 Q265.0188,179.775 265.8625,179.9781 Q266.7219,180.1656 267.5656,180.5562 L267.5656,182.9469 Q266.7844,182.3844 265.9563,182.1031 Q265.1438,181.8062 264.3469,181.8062 Q263.4719,181.8062 262.9875,182.1656 Q262.5188,182.525 262.5188,183.1812 Q262.5188,183.6969 262.8625,184.0406 Q263.2063,184.3687 264.3,184.775 L265.3625,185.1812 Q266.8469,185.7281 267.55,186.6344 Q268.2688,187.5406 268.2688,188.9156 Q268.2688,190.7906 267.1594,191.7125 Q266.05,192.6344 263.8,192.6344 Q262.8781,192.6344 261.9563,192.4156 Q261.0344,192.1969 260.175,191.775 L260.175,189.2437 Q261.1438,189.9312 262.0656,190.275 Q262.9875,190.6187 263.8781,190.6187 Q264.7844,190.6187 265.2844,190.2125 Q265.7844,189.7906 265.7844,189.0562 Q265.7844,188.4937 265.4406,188.0875 Q265.1125,187.6656 264.4875,187.4156 L263.2844,186.9625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="92" x="280.2" y="190.5543">BaseController</text><line style="stroke:#A80036;stroke-width:1.5;" x1="239" x2="385" y1="202.4" y2="202.4"/><ellipse cx="249" cy="213.4" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="122" x="258" y="216.6104">Svr services.Servicer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="239" x2="385" y1="223.2047" y2="223.2047"/><!--MD5=[af6c1ae8e3f64b5645d220b284d73e62]
class controllers.RetStatistics--><rect codeLine="6" fill="#FEFECE" filter="url(#faquket7h49u6)" height="73.6094" id="controllers.RetStatistics" style="stroke:#A80036;stroke-width:1.5;" width="111" x="62.5" y="164"/><ellipse cx="77.5" cy="180" fill="#7FFFD4" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M76.9844,180.5625 Q75.125,179.8594 74.4688,179.0937 Q73.8281,178.3125 73.8281,177 Q73.8281,175.3125 74.9063,174.3437 Q75.9844,173.375 77.8594,173.375 Q78.7188,173.375 79.5625,173.5781 Q80.4219,173.7656 81.2656,174.1562 L81.2656,176.5469 Q80.4844,175.9844 79.6563,175.7031 Q78.8438,175.4062 78.0469,175.4062 Q77.1719,175.4062 76.6875,175.7656 Q76.2188,176.125 76.2188,176.7812 Q76.2188,177.2969 76.5625,177.6406 Q76.9063,177.9687 78,178.375 L79.0625,178.7812 Q80.5469,179.3281 81.25,180.2344 Q81.9688,181.1406 81.9688,182.5156 Q81.9688,184.3906 80.8594,185.3125 Q79.75,186.2344 77.5,186.2344 Q76.5781,186.2344 75.6563,186.0156 Q74.7344,185.7969 73.875,185.375 L73.875,182.8437 Q74.8438,183.5312 75.7656,183.875 Q76.6875,184.2187 77.5781,184.2187 Q78.4844,184.2187 78.9844,183.8125 Q79.4844,183.3906 79.4844,182.6562 Q79.4844,182.0937 79.1406,181.6875 Q78.8125,181.2656 78.1875,181.0156 L76.9844,180.5625 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79" x="91.5" y="184.1543">RetStatistics</text><line style="stroke:#A80036;stroke-width:1.5;" x1="63.5" x2="172.5" y1="196" y2="196"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="70.5" y="204"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="42" x="82.5" y="210.2104">cnt uint</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="70.5" y="216.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61" x="82.5" y="223.0151">errCnt uint</text><line style="stroke:#A80036;stroke-width:1.5;" x1="63.5" x2="172.5" y1="229.6094" y2="229.6094"/><!--MD5=[0603066056f22bda3fa9063667931d1c]
class controllers.RuleController--><rect codeLine="11" fill="#FEFECE" filter="url(#faquket7h49u6)" height="240.0703" id="controllers.RuleController" style="stroke:#A80036;stroke-width:1.5;" width="560" x="32" y="297.61"/><ellipse cx="263.75" cy="313.61" fill="#7FFFD4" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M263.2344,314.1725 Q261.375,313.4694 260.7188,312.7037 Q260.0781,311.9225 260.0781,310.61 Q260.0781,308.9225 261.1563,307.9537 Q262.2344,306.985 264.1094,306.985 Q264.9688,306.985 265.8125,307.1881 Q266.6719,307.3756 267.5156,307.7662 L267.5156,310.1569 Q266.7344,309.5944 265.9063,309.3131 Q265.0938,309.0162 264.2969,309.0162 Q263.4219,309.0162 262.9375,309.3756 Q262.4688,309.735 262.4688,310.3912 Q262.4688,310.9069 262.8125,311.2506 Q263.1563,311.5787 264.25,311.985 L265.3125,312.3912 Q266.7969,312.9381 267.5,313.8444 Q268.2188,314.7506 268.2188,316.1256 Q268.2188,318.0006 267.1094,318.9225 Q266,319.8444 263.75,319.8444 Q262.8281,319.8444 261.9063,319.6256 Q260.9844,319.4069 260.125,318.985 L260.125,316.4537 Q261.0938,317.1412 262.0156,317.485 Q262.9375,317.8287 263.8281,317.8287 Q264.7344,317.8287 265.2344,317.4225 Q265.7344,317.0006 265.7344,316.2662 Q265.7344,315.7037 265.3906,315.2975 Q265.0625,314.8756 264.4375,314.6256 L263.2344,314.1725 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="88" x="284.25" y="317.7643">RuleController</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="591" y1="329.61" y2="329.61"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="337.61"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="159" x="52" y="343.8204">param *param.QueryParam</text><line style="stroke:#A80036;stroke-width:1.5;" x1="33" x2="591" y1="350.4147" y2="350.4147"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="358.4147"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="52" y="364.6251">handle() (int, string, error)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="371.2194"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="361" x="52" y="377.4298">signAndDecodeParam(reqPam *param.QueryParam) (int, error)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="384.0241"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146" x="52" y="390.2345">sign() (string, bool, error)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="396.8287"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="344" x="52" y="403.0392">judge(param string, localRet int, localMsg string) (int, string)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="409.6334"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="52" y="415.8439">getRuleType() string</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="422.4381"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="186" x="52" y="428.6486">updateStatistics(ruleType string)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="40" y="435.2428"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="534" x="52" y="441.4533">handleDifference(ruleType string, onlineMsg string, localMsg string, onlineRet int, localRet int)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="56" y="454.2579"/><ellipse cx="43" cy="463.8522" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="52" y="467.0626">Prepare()</text><ellipse cx="43" cy="476.6569" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="52" y="479.8673">Get()</text><ellipse cx="43" cy="489.4616" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="37" x="52" y="492.672">Head()</text><ellipse cx="43" cy="502.2662" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="52" y="505.4767">Post()</text><ellipse cx="43" cy="515.0709" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="297" x="52" y="518.2814">Response(iErrCode int, sMsg string, sType ...string)</text><ellipse cx="43" cy="527.8756" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="255" x="52" y="531.0861">ResponseExt(iErrCode int, sMsg string, mExt</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="25" x="311" y="531.0861">map</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="157" x="336" y="531.0861">[string]string, sType string)</text><!--MD5=[d2ff56abfe5127daba66d9c2ec9909c9]
class djframework.Controller--><rect fill="#FEFECE" filter="url(#faquket7h49u6)" height="48" id="djframework.Controller" style="stroke:#A80036;stroke-width:1.5;" width="93" x="265.5" y="41"/><ellipse cx="280.5" cy="57" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M283.4688,62.6406 Q282.8906,62.9375 282.25,63.0781 Q281.6094,63.2344 280.9063,63.2344 Q278.4063,63.2344 277.0781,61.5938 Q275.7656,59.9375 275.7656,56.8125 Q275.7656,53.6875 277.0781,52.0313 Q278.4063,50.375 280.9063,50.375 Q281.6094,50.375 282.25,50.5313 Q282.9063,50.6875 283.4688,50.9844 L283.4688,53.7031 Q282.8438,53.125 282.25,52.8594 Q281.6563,52.5781 281.0313,52.5781 Q279.6875,52.5781 279,53.6563 Q278.3125,54.7188 278.3125,56.8125 Q278.3125,58.9063 279,59.9844 Q279.6875,61.0469 281.0313,61.0469 Q281.6563,61.0469 282.25,60.7813 Q282.8438,60.5 283.4688,59.9219 L283.4688,62.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61" x="294.5" y="61.1543">Controller</text><line style="stroke:#A80036;stroke-width:1.5;" x1="266.5" x2="357.5" y1="73" y2="73"/><line style="stroke:#A80036;stroke-width:1.5;" x1="266.5" x2="357.5" y1="81" y2="81"/><!--MD5=[de705d7a3bde2d54df940da0e14d84aa]
reverse link djframework.Controller to controllers.BaseController--><path codeLine="31" d="M312,103.64 C312,124.71 312,150.6 312,170.21 " fill="none" id="djframework.Controller-backto-controllers.BaseController" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="312,90.82,308,96.82,312,102.82,316,96.82,312,90.82" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8534b2d4432eab63bc9708ab5990777a]
reverse link controllers.BaseController to controllers.RuleController--><path codeLine="32" d="M312,245.95 C312,261.18 312,279.04 312,297.38 " fill="none" id="controllers.BaseController-backto-controllers.RuleController" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="312,233.19,308,239.19,312,245.19,316,239.19,312,233.19" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[66d57ce220502650c21213ffb008f197]
@startuml
namespace controllers {
    class BaseController << (S,Aquamarine) >> {
        + Svr services.Servicer

    }
    class RetStatistics << (S,Aquamarine) >> {
        - cnt uint
        - errCnt uint

    }
    class RuleController << (S,Aquamarine) >> {
        - param *param.QueryParam

        - handle() (int, string, error)
        - signAndDecodeParam(reqPam *param.QueryParam) (int, error)
        - sign() (string, bool, error)
        - judge(param string, localRet int, localMsg string) (int, string)
        - getRuleType() string
        - updateStatistics(ruleType string) 
        - handleDifference(ruleType string, onlineMsg string, localMsg string, onlineRet int, localRet int) 

        + Prepare() 
        + Get() 
        + Head() 
        + Post() 
        + Response(iErrCode int, sMsg string, sType ...string) 
        + ResponseExt(iErrCode int, sMsg string, mExt <font color=blue>map</font>[string]string, sType string) 

    }
}
"djframework.Controller" *- - "controllers.BaseController"
"controllers.BaseController" *- - "controllers.RuleController"


@enduml

PlantUML version 1.2021.00(Sun Jan 10 18:25:05 GMT+08:00 2021)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>